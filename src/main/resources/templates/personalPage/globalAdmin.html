<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <title>Admin</title>
</head>
<body>
<div>

</div>
<form th:object="${region}" action="/city/add" method="post" enctype="multipart/form-data">
    <span>Выберите регион: </span>
    <select name="select" size="1">
        <option disabled selected value="">--</option>
        <div th:each="region : ${region}">
            <option th:value="${region.id}" th:text="${region.name}"></option>
        </div>
    </select>
    <input type="text" name="capital" class="popup__input" placeholder="Name"><br>
    <button type="submit" class="popup__btn">Добавить</button>
</form>
Вот добавленные города
<div th:each="city : ${city}">
    Город: <span th:text="${city.capital}"></span> в регионе: <span th:text="${city.region.name}"></span><br>
</div>
<br><br><br>
<hr size="10px">
<div>
    <h4>Добавить поликлинку</h4>
    <form th:object="${city}" action="/polyclinic/add" method="post" enctype="multipart/form-data">
        <span>Выберите регион: </span>
        <span>Выберите город: </span>
        <select name="select" size="1">
            <option disabled selected value="">--</option>
            <div th:each="city : ${city}">
                <option th:value="${city.id}" th:text="${city.capital}"></option>
            </div>
        </select>
        <br>
        <input  type="text" name="name" class="popup__input" placeholder="Название поликлиники"><br>
        <input type="text" name="year" class="popup__input" placeholder="Год открытия"><br>
        <input type="text" name="phone" class="popup__input" placeholder="Телефон"><br>
        <input type="text" name="address" class="popup__input" placeholder="Адрес"><br>
        <input type="text" name="graphic" class="popup__input" placeholder="График работы"><br>
        <button type="submit" class="popup__btn">Добавить</button>
    </form>
<br><br><br>
    Добавленные поликлиники
    <div th:each="pol : ${pol}">
        <hr>
        Поликлиника: <p th:text="${pol.name}"></p>
        <p th:text="${pol.address}"></p>
        <p th:text="${pol.year}"></p>
        <p th:text="${pol.phone}"></p>
        <p th:text="${pol.graphic}"></p>
        Область: <p th:text="${pol.city.region.name}"></p>
        Город: <p th:text="${pol.city.capital}"></p>
        <a th:href="'/polyclinics/' + ${pol.id} + '/update'">Изменить</a>
        <form th:action="'/polyclinics/'+${pol.id} + '/delete'" method="post">
            <input type="submit" value="Удалить"/>
        </form>
        <br><hr>
    </div>
</div>
<section>
    <h3>Жители: </h3>
    <div th:each="citizen : ${citizens}">
        <p th:text="${citizen.personalId}"></p>
        <p th:text="${citizen.birthDate}"></p>
    </div>
</section>

<section>
    Зарегистрировать нового человека-жителя
    <form th:action="@{/citizen}" method="post">
        <input type="text" name="personalId" placeholder="PersonalId">
        <input type="text" name="name" placeholder="Name">
        <input type="text" name="lastName" placeholder="Last Name">
        <select name="selectGender" size="1">
            <option value="" disabled selected>Выберите пол</option>
            <option value="Man">М</option>
            <option value="Woman">Ж</option>
        </select>
        <input type="text" name="birthPlace" placeholder="Birth Place"/>
        Выберите дату рождения:
        <input type="date" name="birthDate"/>
        <input type="submit" value="Добавить">
    </form>
</section>
<section>
    Зарегистрировать жителя в системе
    <form th:action="@{/registration}" method="post">
        <select name="personalId" size="1">
            <option disabled selected value="">Выберите id</option>
            <div th:each="citizen : ${citizens}">
                <option th:value="${citizen.personalId}" th:text="${citizen.personalId}"></option>
            </div>
        </select>
        <input type="password" name="password" placeholder="Password">
        <select id="selectRole" name="selectRole" size="1" onchange="showExtraField()">
            <option disabled selected value="">Выберите роль</option>
            <div th:each="role : ${roles}">
                <option th:value="${role}" th:text="${role}"></option>
            </div>
        </select>
        <div id="extraField"></div>
        <script>
            function showExtraField() {
              var role = document.getElementById("selectRole").value;
              if (role == "STAFF") {
                document.getElementById("extraField").innerHTML = '<input type="text"  name="extraField" name="job" placeholder="Работа"/>';
              }
            }
        </script>
        <input type="submit" value="Register">
    </form>
</section>
<section>
    <h3>Добавить Раздел Услуг</h3>
    <form th:action="@{/services}" method="post">
        <input type="text" name="title" placeholder="Название раздела">
        <input type="submit" value="Добавить">
    </form>
    <div th:each="service : ${services}">
        <p th:text="${service.title}"></p>
        <a th:href="'/services/' + ${service.id} + '/update'">Изменить</a>
        <form th:action="'/services/'+${service.id} + '/delete'" method="post">
            <input type="submit" value="Удалить"/>
        </form>
    </div>
    <h3>Добавить Услуги</h3>
    <form th:action="@{/serv}" method="post">
        <span>Выберите Раздел: </span>
        <select name="selectServ" size="1">
            <option disabled selected value="">----</option>
            <div th:each="service : ${services}">
                <option th:value="${service.id}" th:text="${service.title}"></option>
            </div>
        </select>
        <input type="text" name="name" placeholder="Название услуги">
        <input type="text" name="about" placeholder="Об услуге">
        <input type="text" name="howItWorks" placeholder="Как оно устроено">
        <input type="submit" value="Добавить">
    </form>
    <div th:each="serv : ${serv}">
        <p th:text="${serv.name}"></p>
        <p th:text="${serv.howItWorks}"></p>
        <a th:href="'/serv/' + ${serv.id} + '/update'">Изменить</a>
        <form th:action="'/serv/'+${serv.id} + '/delete'" method="post">
            <input type="submit" value="Удалить"/>
        </form>
    </div>
</section>
<!--  else if (roleId == 2) {-->
<!--    document.getElementById("extraField").innerHTML = '<input type="text" name="otherExtraField" />';-->
<!--  }-->
<!--  else {-->
<!--    document.getElementById("extraField").innerHTML = '';-->
<!--  }-->
<br><br><br><br><br>
</body>
</html>